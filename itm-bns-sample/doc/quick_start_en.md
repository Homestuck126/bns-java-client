## Quick Starts

### About Quick Starts

Development for SDK require the following prerequisite:

- An ITM SPO Java SDK
- A machine running with Linux / MacOS / Windows 10

Depending on your operating system, our SDK supports serveral development enviroments:

- Visual Studio Code (VSCode) : You need to install [Java Extension Pack](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack) for VSCode. This extension enables you to develop and execute our SDK in Linux, MacOS and Windows enviroments.

- Command Line Interface (CLI)

- IntelliJ IDEA

The quickstarts are intended to guide you through the steps to install the software that SDK will need, configure the settings for Sample Code, and check the result after doing ledgerinput. Quick starts involved follwing steps:

<!-- no toc -->
1. [Download the SDK](#1-download-the-sdk)
2. [Install packages required to SDK](#2-install-packages-required-to-sdk)
3. [Configure setting for SDK Sample Code](#3-configure-the-settings-for-sample-code)
4. [Run the Sample code](#4-run-the-sample-code)
5. [Check the result](#5-check-the-result)

Complete the quickstarts for each steps, then you will be ready to run the tutorial and develop our SDK with your own applications.

### 1. Download the SDK

To download the code, you will need to install git (If not installed yet) and then type

```shell
> git clone https://github.com/itrustmachines/itm-spo-sdk-java.git
```

### 2. Install packages required to SDK

Before you run the SDK, you need to add required packages to your computer if they are not already installed. Depending on your operating systems, enter the following commands in terminal. You may omit packages that are already installed but make sure your java version is higher than 8, you can type `java --version` in terminal to check.

- Please refer to [Java offical website](https://www.oracle.com/java/technologies/javase-downloads.html) to install or upgrade the Java

- Please refer to [Maven offical website](https://maven.apache.org) to install or upgrade the Maven

### 3. Configure the settings for Sample Code

This configuration file is very important. Main program use this configuration file to initialize the SPO Client. Configuration file includes private key, blockchain address, server URL setting ... etc.

Modifying the configuration file require the following prerequisites:

1. Private key : To make sure the reliability of every data source, we need a unique private key to process digital signature for each data source. We provide the program to generate the private key. Please check the following commands

    Move to itm-spo-sdk-key-generator folder

    ```shell
    > cd itm-spo-sdk-java/itm-spo-sdk-key-generator 
    ```

    Execute the code to generate the private key and keep the private key carefully

    ```shell
    > mvn clean install -DskipTests
    > ./run_SpoKeyGenerator.sh
    [INFO] Scanning for projects...
    ...
    ...
    ...
    [INFO] 
    [INFO] --- exec-maven-plugin:3.0.0:java (default-cli) @ spo-sdk-key-generator ---
    ### Copy and save the private key carefully ###
    privateKey = .......
    publicKey = 535d3e3b3e0eb7bbfe5f69068f25d64b4f8489510c0f4a25111016994d11f0cc4f4acb382d50a51eca9cd5f5bb1a14392613865ad0596144b700b078554ca4d3
    clientWalletAddress = 0xdccc511e05023581ae4b563b93d31672cf3c7743
    ```

2. Rinkeby Blockchain Node URL : In order to get the onchain proof, we need to access the node of blockchain. We use Rinkeby blockchain for our testing enviroment. The Rinkeby blockchain node URL can obtain via Infura. Please check the [Infura tutorial](./infura_en.md) to get the Rinkey Node URL.

After obtain the private key and Rinkeby Node URL, then you will be ready to modify the configuration file [sample.properties](../src/main/resources/sample.properties). Please check the file and follow the instructions in file or below.

```Java
/**
 * Please fill in the 128 bits (32 bytes) Hex encoded
 * private key which generated by itm-spo-sdk-key-generator
 */ 
privateKey=

/** 
 * Please fill in the index value of data source. 
 * The index value is the index of clearance. 
 * You can use device ID instead, if data source is coming from device.
 * But make sure the index value must be unique.
 */
indexValueKey=

/** Please fill in the URL of SPO Server */
spoServerUrl=https://azure-prod-rinkeby.itm.monster:4430/
    
/** 
 * Please fill in the Node URL of Rinkey which generated by Infura
 */
nodeUrl=https://rinkeby.infura.io/v3/{InfuraProjectId}

/** SPO Client will verify the receipt in the unit of page, you can change the number to set how many receipt will page to take and verify. We will discuss this setting in Tutorial document, you can keep this in default*/
verifyBatchSize=10

/** You can change the number to set how many second delay for each verification. We will discuss this setting in Tutorial document, you can keep this in default*/
verifyDelaySec=1

/** When failed ledgerinput occured, SPO Client will request again. You can change the number to set how many second delay for each retry. We will discuss this setting in Tutorial document, you can keep this in default*/
retryDelaySec=5
```

### 4. Run the Sample Code

#### Command Line Interface
Move to itm-spo-sdk-sample folder

```shell
> cd itm-spo-sdk-java/itm-spo-sdk-sample
```

Execute the program to start doing ledgerInput

```shell
> mvn clean install -DskipTests
> ./run_BnsClientSample.sh
```

#### Visual Studio Code

1. Open Command Palette
2. Type Maven and choose `Maven : Execute Commands`
3. Choose itm-spo-sdk-sample project
4. Choose Custom and type `clean package exec:java -Dexec.classpathScope=compile` 
5. Press Enter

#### Intellij IDEA

1. Open itm-spo-sdk-java with Maven Project
2. Build Project
3. Click Run Anything
4. Choose itm-spo-sdk-sample project
5. Type `mvn clean package exec:java -Dexec.classpathScope=compile` and press Enter

### 5. Check the result

After excuting the sample code. The SPO Client will do ledgerinput. You can check the result of ledgerinput on ITM Dashbaord website.

1. Use your Web Browser to open [ITM Dashboard](https://azure-prod-rinkeby.itm.monster:8443)

2. Click the Device in the left side bar

3. Choose your data source in device list, the name of data source is `indexValueKey` that you type in [sample.properties](../src/main/resources/sample.properties)

4. Move your mouse to CMD icon then you can view CMD contents.
![cmd_content](../image/cmd_content.png)

5. If your data is onchain, the background of status icon will become green. Otherwise, it will be gray. The default setting of SPO Server is clearance every 200 ledgerinputs. You can let program keep doing ledgerinput until clearance.
![onchain](../image/onchain.png)
![offchain](../image/offchain.png)

6. If your data is onchain, you can click On-chain Proof icon to view the proof on blockchain via blochchain browser.

7. If your data is onchain, you can click Off-chain Proof icon to download the proof and use our Verification Server or Verification Program SDK to verify this data whether be tampered.
![download_offchain](../image/download_offchain.png)

8. Click the verification server icon
![verification_server](../image/verification_server.png)

9. Click Proof verification
![proof_verification](../image/proof_verification.png)

10. Upload the Off-chain proof your download before
![upload_offchain](../image/upload_offchain.png)

11. If Off-Chain proof is tempered-free, the verify result icon will become green, otherwise, it will be red.
![verify_result](../image/verify_result.png)

----
Quickstarts is now complete. Next, learn how to build your own CMD.

## Next Steps

Next Page : [Build the CMD](./cmd_en.md)
Last Page : [Home](../README.md)